{"ast":null,"code":"var _jsxFileName = \"E:\\\\Projects\\\\doughboys-pizza\\\\src\\\\components\\\\square-payment.js\";\nimport React, { useState, useContext } from 'react';\nimport ApplicationContext from '../ApplicationContext';\nimport { SquarePaymentForm, CreditCardCVVInput, CreditCardExpirationDateInput, CreditCardNumberInput, CreditCardPostalCodeInput, CreditCardSubmitButton } from 'react-square-payment-form';\nimport 'react-square-payment-form/lib/default.css';\nconst APPLICATION_ID = process.env.REACT_APP_APPLICATION_ID;\nconst LOCATION_ID = process.env.REACT_APP_LOCATION_ID;\n\nconst PaymentPage = props => {\n  const state = useContext(ApplicationContext);\n  const [loading, setLoading] = useState(false);\n  const [errorMessages, setErrorMessages] = useState([]);\n\n  function cardNonceResponseReceived(errors, nonce, cardData, buyerVerificationToken) {\n    if (errors) {\n      setErrorMessages(errors.map(error => error.message));\n      return;\n    }\n\n    setErrorMessages([]);\n    setLoading(true);\n    fetch('http://localhost:8080/complete-order', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        nonce: nonce,\n        buyerVerificationToken: buyerVerificationToken,\n        order: state.order,\n        orderPlacer: props.orderPlacer\n      })\n    }).then(response => {\n      return response.json();\n    }).then(data => {\n      setLoading(false);\n      props.orderReceipt.setOrderReceipt(data);\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SquarePaymentForm, {\n    sandbox: true,\n    applicationId: APPLICATION_ID,\n    locationId: LOCATION_ID,\n    cardNonceResponseReceived: cardNonceResponseReceived,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"fieldset\", {\n    className: \"sq-fieldset\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CreditCardNumberInput, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sq-form-third\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CreditCardExpirationDateInput, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sq-form-third\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CreditCardPostalCodeInput, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sq-form-third\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CreditCardCVVInput, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(CreditCardSubmitButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, \"Submit Payment\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sq-error-message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, errorMessages.map(errorMessage => /*#__PURE__*/React.createElement(\"li\", {\n    key: `sq-error-${errorMessage}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 21\n    }\n  }, errorMessage)))), loading ? /*#__PURE__*/React.createElement(\"progress\", {\n    class: \"progress is-small is-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 20\n    }\n  }) : null);\n};\n\nexport default PaymentPage;","map":{"version":3,"sources":["E:/Projects/doughboys-pizza/src/components/square-payment.js"],"names":["React","useState","useContext","ApplicationContext","SquarePaymentForm","CreditCardCVVInput","CreditCardExpirationDateInput","CreditCardNumberInput","CreditCardPostalCodeInput","CreditCardSubmitButton","APPLICATION_ID","process","env","REACT_APP_APPLICATION_ID","LOCATION_ID","REACT_APP_LOCATION_ID","PaymentPage","props","state","loading","setLoading","errorMessages","setErrorMessages","cardNonceResponseReceived","errors","nonce","cardData","buyerVerificationToken","map","error","message","fetch","method","headers","body","JSON","stringify","order","orderPlacer","then","response","json","data","orderReceipt","setOrderReceipt","errorMessage"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport ApplicationContext from '../ApplicationContext';\r\nimport {\r\n    SquarePaymentForm,\r\n    CreditCardCVVInput,\r\n    CreditCardExpirationDateInput,\r\n    CreditCardNumberInput,\r\n    CreditCardPostalCodeInput,\r\n    CreditCardSubmitButton,\r\n} from 'react-square-payment-form';\r\nimport 'react-square-payment-form/lib/default.css';\r\n\r\nconst APPLICATION_ID = process.env.REACT_APP_APPLICATION_ID;\r\nconst LOCATION_ID = process.env.REACT_APP_LOCATION_ID;\r\n\r\nconst PaymentPage = (props) => {\r\n    const state = useContext(ApplicationContext);\r\n    const [loading, setLoading] = useState(false); \r\n    const [errorMessages, setErrorMessages] = useState([]);\r\n\r\n    function cardNonceResponseReceived(errors, nonce, cardData, buyerVerificationToken) {\r\n        if (errors) {\r\n            setErrorMessages(errors.map(error => error.message));\r\n            return;\r\n        }\r\n\r\n        setErrorMessages([]);\r\n\r\n        setLoading(true)\r\n        fetch('http://localhost:8080/complete-order', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({nonce: nonce, buyerVerificationToken: buyerVerificationToken, order: state.order, orderPlacer: props.orderPlacer }),\r\n        })\r\n        .then((response) => {\r\n           return response.json(); \r\n        }).then((data) => {\r\n            setLoading(false)\r\n            props.orderReceipt.setOrderReceipt(data);\r\n        })\r\n    }\r\n    return (\r\n        <>\r\n        <SquarePaymentForm\r\n            sandbox={true}\r\n            applicationId={APPLICATION_ID}\r\n            locationId={LOCATION_ID}\r\n            cardNonceResponseReceived={cardNonceResponseReceived}\r\n        >\r\n            <fieldset className=\"sq-fieldset\">\r\n                <CreditCardNumberInput/>\r\n\r\n                <div className=\"sq-form-third\">\r\n                    <CreditCardExpirationDateInput />\r\n                </div>\r\n\r\n                <div className=\"sq-form-third\">\r\n                    <CreditCardPostalCodeInput />\r\n                </div>\r\n\r\n                <div className=\"sq-form-third\">\r\n                    <CreditCardCVVInput />\r\n                </div>\r\n            </fieldset>\r\n\r\n            <CreditCardSubmitButton>Submit Payment</CreditCardSubmitButton>\r\n\r\n            <div className=\"sq-error-message\">\r\n                {errorMessages.map(errorMessage => (\r\n                    <li key={`sq-error-${errorMessage}`}>{errorMessage}</li>\r\n                ))}\r\n            </div>\r\n        </SquarePaymentForm>\r\n        {loading ? <progress class=\"progress is-small is-primary\"/> : null}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default PaymentPage;"]},"metadata":{},"sourceType":"module"}